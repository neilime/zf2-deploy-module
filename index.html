<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=640" />

    <link rel="stylesheet" href="stylesheets/core.css" media="screen"/>
    <link rel="stylesheet" href="stylesheets/mobile.css" media="handheld, only screen and (max-device-width:640px)"/>
    <link rel="stylesheet" href="stylesheets/pygment_trac.css"/>

    <script type="text/javascript" src="javascripts/modernizr.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="javascripts/headsmart.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {
        $('#main_content').headsmart()
      })
    </script>
    <title>Zf2-deploy-module by neilime</title>
  </head>

  <body>
    <a id="forkme_banner" href="https://github.com/neilime/zf2-deploy-module">View on GitHub</a>
    <div class="shell">

      <header>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <h1>Zf2-deploy-module</h1>
            <h2>ZF2 Deploy Module provides tools for deploying ZF2 modules into a ZendSkeletonApplication to display / tests module's views</h2>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
      </header>

      <section id="downloads">
        <span class="inner">
          <a href="https://github.com/neilime/zf2-deploy-module/zipball/master" class="zip"><em>download</em> .ZIP</a><a href="https://github.com/neilime/zf2-deploy-module/tarball/master" class="tgz"><em>download</em> .TGZ</a>
        </span>
      </section>


      <span class="banner-fix"></span>


      <section id="main_content">
        <h1>
<a name="zf2-deploy-module-v10" class="anchor" href="#zf2-deploy-module-v10"><span class="octicon octicon-link"></span></a>ZF2 Deploy Module, v1.0</h1>

<p><a href="https://travis-ci.org/neilime/zf2-deploy-module"><img src="https://travis-ci.org/neilime/zf2-deploy-module.png?branch=master" alt="Build Status"></a>
<a href="https://packagist.org/packages/neilime/zf2-deploy-module"><img src="https://poser.pugx.org/neilime/zf2-deploy-module/v/stable.png" alt="Latest Stable Version"></a>
<a href="https://packagist.org/packages/neilime/zf2-deploy-module"><img src="https://poser.pugx.org/neilime/zf2-deploy-module/downloads.png" alt="Total Downloads"></a></p>

<p>NOTE : If you want to contribute don't hesitate, I'll review any PR.</p>

<h2>
<a name="introduction" class="anchor" href="#introduction"><span class="octicon octicon-link"></span></a>Introduction</h2>

<p><strong>ZF2 Deploy Module</strong> provides tools for deploying ZF2 modules into a ZendSkeletonApplication to display / tests module's views. 
It is useful for ZF2 modules developers, in order to render modules views (for humans, selenium...).</p>

<p>The benefit of this tool is that it does not change the module to deploy (no moving / changing / adding files), it manages the autoloading, <a href="http://getcomposer.org/">composer</a> (install / update), and adding the module(s) in the application configuration.</p>

<h2>
<a name="contributing" class="anchor" href="#contributing"><span class="octicon octicon-link"></span></a>Contributing</h2>

<p>If you wish to contribute to ZF2 Deploy Module, please read both the <a href="CONTRIBUTING.md">CONTRIBUTING.md</a> file.</p>

<h2>
<a name="requirements" class="anchor" href="#requirements"><span class="octicon octicon-link"></span></a>Requirements</h2>

<ul>
<li>
<a href="https://github.com/zendframework/zf2">Zend Framework 2</a> (2.*)</li>
</ul><h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<h3>
<a name="main-setup" class="anchor" href="#main-setup"><span class="octicon octicon-link"></span></a>Main Setup</h3>

<h4>
<a name="by-cloning-project" class="anchor" href="#by-cloning-project"><span class="octicon octicon-link"></span></a>By cloning project</h4>

<ol>
<li>Clone this project into your <code>./vendor/</code> directory.</li>
</ol><h4>
<a name="with-composer" class="anchor" href="#with-composer"><span class="octicon octicon-link"></span></a>With composer</h4>

<ol>
<li>
<p>Add this project in your composer.json:</p>

<div class="highlight highlight-json"><pre><span class="s2">"require_dev"</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">"neilime/zf2-deploy-module"</span><span class="p">:</span> <span class="s2">"1.*"</span>
<span class="p">}</span>
</pre></div>

<p>Or</p>

<div class="highlight highlight-json"><pre><span class="s2">"require"</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">"neilime/zf2-deploy-module"</span><span class="p">:</span> <span class="s2">"1.*"</span>
<span class="p">}</span>
</pre></div>
</li>
<li>
<p>Now tell composer to download <strong>ZF2 Deploy Module</strong> by running the command:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>php composer.phar update
</pre></div>
</li>
</ol><h2>
<a name="how-to-use-zf2-deploy-module" class="anchor" href="#how-to-use-zf2-deploy-module"><span class="octicon octicon-link"></span></a>How to use <em>ZF2 Deploy Module</em>
</h2>

<p><em>ZF2 Deploy Module</em> provides console tools.</p>

<h3>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h3>

<div class="highlight highlight-bash"><pre>php ./vendor/bin/deploy_module.php <span class="o">[</span>args<span class="o">]</span>
</pre></div>

<h3>
<a name="arguments" class="anchor" href="#arguments"><span class="octicon octicon-link"></span></a>Arguments</h3>

<pre><code>--help|-h                   Get usage message
--module|-m [ &lt;string&gt; ]    Module path to deploy; if none provided, assumes current directory
--dir|-d [ &lt;string&gt; ]       Directory path where to deploy the module (ex: apache/www/my-module), the directory could be created if needed
--modules|-a [ &lt;string&gt; ]   (optionnal) Additionnal module namespaces (comma separated) to be used in the application
--zapp|-z [ &lt;string&gt; ]      (optionnal) ZendSkeletonApplication file path, allows locale or remote directory, allows archive (Phar, Rar, Zip) depending on PHP installed libraries
--composer|-c [ &lt;string&gt; ]  (optionnal) Composer.phar file path, allows locale or remote directory
--overwrite|-w              Whether or not to overwrite existing deployed ZendSkeletonApplication
--verbose|-v                Whether or not to display execution trace
</code></pre>

<h2>
<a name="exemple" class="anchor" href="#exemple"><span class="octicon octicon-link"></span></a>Exemple</h2>

<h3>
<a name="deploy-a-module-to-run-it-with-easyphp-windows" class="anchor" href="#deploy-a-module-to-run-it-with-easyphp-windows"><span class="octicon octicon-link"></span></a>Deploy a module to run it with EasyPhp (windows)</h3>

<p>This exemple expects :  </p>

<ul>
<li>EasyPhp &amp; PHP is installed on windows</li>
<li>A virtual host named "<a href="http://www.test-module.com">www.test-module.com</a>" redirect to DocumentRoot "C:\Program Files\EasyPHP-DevServer\data\localweb\TestModule\public"</li>
</ul><ol>
<li><p>Install <strong>ZF2 Deploy Module</strong> into the your module project as explain above</p></li>
<li>
<p>Deploy module into EasyPhp "\TestModule"</p>

<div class="highlight highlight-bash"><pre><span class="nb">cd </span>path<span class="se">\t</span>o<span class="se">\y</span>our<span class="se">\m</span>odule<span class="se">\d</span>irectory
php ./vendor/bin/deploy_module.php -d <span class="s2">"C:\Program Files\EasyPHP-DevServer\data\localweb\TestModule"</span> -v
</pre></div>
</li>
<li><p>Display it in your browser 
Go to <a href="http://www.test-module.com">http://www.test-module.com</a></p></li>
</ol><h3>
<a name="deploy-a-module-for-selenium-tests-with-travis-ciorg" class="anchor" href="#deploy-a-module-for-selenium-tests-with-travis-ciorg"><span class="octicon octicon-link"></span></a>Deploy a module for Selenium tests with "travis-ci.org"</h3>

<ol>
<li>
<p>Edit your .travis.yml</p>

<div class="highlight highlight-yml"><pre><span class="l-Scalar-Plain">before_install</span><span class="p-Indicator">:</span>
<span class="c1"># Update composer</span>
<span class="p-Indicator">-</span> <span class="l-Scalar-Plain">composer self-update</span>
<span class="c1"># Install project</span>
<span class="p-Indicator">-</span> <span class="l-Scalar-Plain">composer install --dev -o</span>
<span class="c1">#deploy module</span>
<span class="p-Indicator">-</span> <span class="l-Scalar-Plain">mkdir ../deploy</span>
<span class="p-Indicator">-</span> <span class="l-Scalar-Plain">php ./vendor/bin/deploy_module.php -d ../deploy -v</span>
<span class="c1"># Install php packages</span>
<span class="p-Indicator">-</span> <span class="s">"sudo</span><span class="nv"> </span><span class="s">apt-get</span><span class="nv"> </span><span class="s">update</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">/dev/null"</span>
<span class="p-Indicator">-</span> <span class="s">"sudo</span><span class="nv"> </span><span class="s">apt-get</span><span class="nv"> </span><span class="s">install</span><span class="nv"> </span><span class="s">-y</span><span class="nv"> </span><span class="s">--force-yes</span><span class="nv"> </span><span class="s">apache2</span><span class="nv"> </span><span class="s">libapache2-mod-php5</span><span class="nv"> </span><span class="s">php5-curl</span><span class="nv"> </span><span class="s">php5-mysql</span><span class="nv"> </span><span class="s">php5-intl"</span>
<span class="c1"># Create VirtualHost</span>
<span class="p-Indicator">-</span> <span class="l-Scalar-Plain">sudo sed -i -e "s,/var/www,$(pwd)/../deploy/public,g" /etc/apache2/sites-available/default</span>
<span class="p-Indicator">-</span> <span class="l-Scalar-Plain">sudo sed -i -e "/DocumentRoot/i\ServerName test-selenium.dev" /etc/apache2/sites-available/default</span>
<span class="p-Indicator">-</span> <span class="l-Scalar-Plain">echo "127.0.0.1 test-selenium.dev" | sudo tee -a /etc/hosts</span>
<span class="p-Indicator">-</span> <span class="s">"sudo</span><span class="nv"> </span><span class="s">/etc/init.d/apache2</span><span class="nv"> </span><span class="s">restart"</span>
<span class="c1">#Run selenium</span>
<span class="p-Indicator">-</span> <span class="s">"sh</span><span class="nv"> </span><span class="s">-e</span><span class="nv"> </span><span class="s">/etc/init.d/xvfb</span><span class="nv"> </span><span class="s">start"</span>
<span class="p-Indicator">-</span> <span class="s">"export</span><span class="nv"> </span><span class="s">DISPLAY=:99.0"</span>
<span class="p-Indicator">-</span> <span class="s">"wget</span><span class="nv"> </span><span class="s">http://selenium.googlecode.com/files/selenium-server-standalone-2.25.0.jar"</span>
<span class="p-Indicator">-</span> <span class="s">"java</span><span class="nv"> </span><span class="s">-jar</span><span class="nv"> </span><span class="s">selenium-server-standalone-2.25.0.jar</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">/dev/null</span><span class="nv"> </span><span class="s">2&gt;&amp;1</span><span class="nv"> </span><span class="s">&amp;"</span>
<span class="p-Indicator">-</span> <span class="s">"sleep</span><span class="nv"> </span><span class="s">30"</span>
</pre></div>
</li>
<li><p>Run the build</p></li>
</ol>
      </section>

      <footer>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <p>this project by <a href="https://github.com/neilime">neilime</a> can be found on <a href="https://github.com/neilime/zf2-deploy-module">GitHub</a></p>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
        <p>Generated with <a href="http://pages.github.com">GitHub Pages</a> using Merlot</p>
        <span class="octocat"></span>
      </footer>

    </div>

    
  </body>
</html>
